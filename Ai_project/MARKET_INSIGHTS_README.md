# Market Insights Dashboard

This component provides data-driven analysis of the job market, focusing on engineering positions in Morocco. The dashboard offers comprehensive visualizations and insights based on real job data.

## Features

- **Market Overview**: Comprehensive summary of the job market including total jobs, average salaries, and top locations
- **Salary Analysis**: Detailed breakdown of salaries by role and industry
- **Job Trends**: Temporal analysis of job posting patterns throughout the year
- **Location Analysis**: Geographic distribution of job opportunities across Morocco
- **Skills Demand**: Analysis of the most in-demand technical and soft skills

## Implementation

### Data Generation

The market insights data is generated through the `analyze_market_data.py` script, which:

1. Loads job data from CSV files (primarily from `adzuna_data/fixed/indeed_jobs_detailed.csv`)
2. Cleans and transforms the data, extracting features such as:
   - Job categories/specialties
   - Skills mentioned in job descriptions
   - Job locations
   - Remote work status
3. Performs analysis to generate insights:
   - Salary trends by role
   - Job distribution by industry
   - Skills demand patterns
   - Geographic distribution
4. Outputs a comprehensive JSON file (`market_insights.json`) containing all the analyzed data

### API Implementation

The market insights API is implemented as a Next.js API route in `ui/app/api/market-insights/route.ts`. The API:

1. Checks for an existing `market_insights.json` file that's less than 24 hours old
2. If the file doesn't exist or is outdated, it runs the Python script to regenerate the data
3. Provides fallback data if the data generation fails
4. Returns the market insights JSON data to the client

### Frontend Dashboard

The market insights dashboard is implemented in `ui/app/market-insights/page.tsx` and provides:

1. A summary section with key metrics
2. Tab-based navigation for detailed insights:
   - Overview tab with multiple visualizations
   - Salary analysis tab
   - Job trends tab
   - Location analysis tab
   - Skills demand tab
3. Responsive visualizations using the Recharts library
4. Information about the salary prediction model and its accuracy

## Automated Updates

The data is kept up-to-date using:

1. The `update_market_insights.sh` script which can be run manually or scheduled
2. Automatic data refresh in the API when the data is more than 24 hours old

To set up automated daily updates, add the following to your crontab:

```bash
0 1 * * * /path/to/update_market_insights.sh
```

## Data Sources

The market insights are based on:

1. Job listings data scraped from various sources, primarily the Indeed job platform
2. Salary predictions generated by the LightGBM machine learning model
3. Structured job category mappings for consistent analysis

## Technologies Used

- **Data Analysis**: Python, Pandas, NumPy
- **API**: Next.js API Routes, TypeScript
- **Frontend**: React, TypeScript, Recharts
- **Automation**: Shell scripting, Cron jobs 